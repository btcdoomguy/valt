<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="40"
             xmlns:userControls="clr-namespace:Valt.UI.UserControls"
             x:Class="Valt.UI.UserControls.FiatInput"
             KeyboardNavigation.TabNavigation="Once">
    <UserControl.Template>
        <ControlTemplate>
            <DataValidationErrors>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0"
                               Text="{Binding CurrencySymbol, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type userControls:FiatInput}}}"
                               VerticalAlignment="Center"
                               Margin="0,0,5,0"
                               IsVisible="{Binding !SymbolOnRight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type userControls:FiatInput}}}" />

                    <TextBox Grid.Column="1"
                             x:Name="TextBoxInput"
                             Name="TextBoxInput"
                             Text="{Binding DisplayValue, Mode=TwoWay, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type userControls:FiatInput}}}"  />

                    <TextBlock Grid.Column="2"
                               Text="{Binding CurrencySymbol, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type userControls:FiatInput}}}"
                               VerticalAlignment="Center"
                               Margin="5,0,0,0"
                               IsVisible="{Binding SymbolOnRight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type userControls:FiatInput}}}" />
                    
                    <Button Grid.Column="3" Classes="calculator"
                            Command="{TemplateBinding CalculatorCommand}"
                            CommandParameter="{TemplateBinding CalculatorCommandParameter}"
                            IsVisible="{TemplateBinding IsCommandSet}">
                    </Button>
                </Grid>
            </DataValidationErrors>
        </ControlTemplate>
    </UserControl.Template>
</UserControl>