<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:userControls="clr-namespace:Valt.UI.UserControls"
        xmlns:lang="clr-namespace:Valt.UI.Lang"
        xmlns:manageFixedExpenses="clr-namespace:Valt.UI.Views.Main.Modals.ManageFixedExpenses"
        mc:Ignorable="d"
        x:Class="Valt.UI.Views.Main.Modals.ManageFixedExpenses.ManageFixedExpensesView"
        Title="{x:Static lang:language.ManageFixedExpenses_Title}"
        x:DataType="manageFixedExpenses:ManageFixedExpensesViewModel"
        d:DesignWidth="950"
        d:DesignHeight="610"
        MinWidth="700"
        MinHeight="400"
        MaxWidth="950"
        MaxHeight="600"
        SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        ExtendClientAreaToDecorationsHint="True"
        SystemDecorations="None"
        ExtendClientAreaTitleBarHeightHint="0">
    <Design.DataContext>
        <manageFixedExpenses:ManageFixedExpensesViewModel />
    </Design.DataContext>
    <Window.KeyBindings>
        <KeyBinding Gesture="Escape" Command="{Binding CloseCommand}" />
    </Window.KeyBindings>
    <Border>
        <Grid RowDefinitions="Auto, *, Auto">
            <userControls:CustomTitleBar Grid.Row="0" Title="{x:Static lang:language.ManageFixedExpenses_Title}"
                                         TitleBarPressed="CustomTitleBarButtonPressed"
                                         CloseClick="CustomTitleBarCloseClicked" />
            <DataGrid Grid.Row="1"
                      x:Name="MainGrid"
                      Margin="10, 10, 10, 0"
                      GridLinesVisibility="All"
                      ItemsSource="{Binding FixedExpenses, Mode=OneWay}"
                      SelectionMode="Extended"
                      CanUserResizeColumns="True"
                      IsReadOnly="True"
                      SelectedItem="{Binding SelectedFixedExpense, Mode=OneWay}"
                      DoubleTapped="MainGrid_OnDoubleTapped"
                      SelectionChanged="MainGrid_OnSelectionChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="{x:Static lang:language.FixedExpenses_Columns_Name}" Width="*"
                                        Binding="{Binding Name}">
                    </DataGridTextColumn>
                    <DataGridTemplateColumn Header="{x:Static lang:language.FixedExpenses_Columns_Category}" Width="140">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate DataType="manageFixedExpenses:ManageFixedExpensesViewModel+FixedExpenseListItemViewModel">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock
                                        Classes="icon"
                                        Text="{Binding CategoryIcon.Unicode}"
                                        Foreground="{Binding CategoryIcon.Color, Converter={StaticResource SystemDrawingColorToBrushConverter}}">
                                    </TextBlock>
                                    <TextBlock Classes="icon-text" Text="{Binding Category}">
                                    </TextBlock>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="{x:Static lang:language.FixedExpenses_Columns_DefaultAccount}" Width="120">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate DataType="manageFixedExpenses:ManageFixedExpensesViewModel+FixedExpenseListItemViewModel">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock
                                        Classes="icon"
                                        Text="{Binding DefaultAccountIcon.Unicode}"
                                        Foreground="{Binding DefaultAccountIcon.Color, Converter={StaticResource SystemDrawingColorToBrushConverter}}">
                                    </TextBlock>
                                    <TextBlock Classes="icon-text" Text="{Binding DefaultAccount}">
                                    </TextBlock>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="{x:Static lang:language.FixedExpenses_Columns_Currency}" Width="80"
                                        Binding="{Binding Currency}">
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="{x:Static lang:language.FixedExpenses_Columns_Amount}" Width="150"
                                        Binding="{Binding Amount}">
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="{x:Static lang:language.FixedExpenses_Columns_Period}" Width="80"
                                        Binding="{Binding Period}">
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="{x:Static lang:language.FixedExpenses_Columns_Day}" Width="60"
                                        Binding="{Binding Day}">
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="{x:Static lang:language.FixedExpenses_Columns_Enabled}" Width="70"
                                        Binding="{Binding EnabledDescription}">
                    </DataGridTextColumn>
                </DataGrid.Columns>
                <DataGrid.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="{x:Static lang:language.Transactions_Menu_Edit}"
                                  Command="{Binding EditFixedExpenseCommand}">
                        </MenuItem>
                        <MenuItem Header="{x:Static lang:language.FixedExpenseHistory_ViewHistory}"
                                  Command="{Binding ViewHistoryCommand}">
                        </MenuItem>
                        <Separator />
                        <MenuItem Header="{x:Static lang:language.Transactions_Menu_Delete}"
                                  Command="{Binding DeleteFixedExpenseCommand}">
                        </MenuItem>
                    </ContextMenu>
                </DataGrid.ContextMenu>
            </DataGrid>
            <Border Grid.Row="1"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Padding="10"
                    Margin="0,0,10,10">
                <Button Classes="rounded" Content="&#xE145;" Command="{Binding AddFixedExpenseCommand}">
                </Button>
            </Border>
            <Border Grid.Row="2"
                    Classes="form-fields-area"
                    VerticalAlignment="Stretch"
                    Margin="10"
                    Padding="8">
                <Grid ColumnDefinitions="Auto, *, *" RowDefinitions="Auto, Auto, Auto">
                    <!-- Header Row -->
                    <Label Grid.Row="0" Grid.Column="1"
                           Content="{x:Static lang:language.ManageFixedExpenses_Footer_Fiat}"
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource Accent200Color}"
                           FontWeight="SemiBold"
                           Margin="0,0,0,8" />
                    <Label Grid.Row="0" Grid.Column="2"
                           Content="{x:Static lang:language.ManageFixedExpenses_Footer_Sats}"
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource Accent200Color}"
                           FontWeight="SemiBold"
                           Margin="0,0,0,8" />

                    <!-- Monthly Row -->
                    <Label Grid.Row="1" Grid.Column="0"
                           Content="{x:Static lang:language.ManageFixedExpenses_MonthlyExpenses}"
                           Foreground="{DynamicResource Accent200Color}"
                           HorizontalAlignment="Right"
                           Margin="0,0,15,4" />
                    <Label Grid.Row="1" Grid.Column="1"
                           Content="{Binding MonthlyExpenses}"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,4" />
                    <Label Grid.Row="1" Grid.Column="2"
                           Content="{Binding MonthlyExpensesSats}"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,4" />

                    <!-- Yearly Row -->
                    <Label Grid.Row="2" Grid.Column="0"
                           Content="{x:Static lang:language.ManageFixedExpenses_YearlyExpenses}"
                           Foreground="{DynamicResource Accent200Color}"
                           HorizontalAlignment="Right"
                           Margin="0,0,15,0" />
                    <Label Grid.Row="2" Grid.Column="1"
                           Content="{Binding YearlyExpenses}"
                           HorizontalAlignment="Center" />
                    <Label Grid.Row="2" Grid.Column="2"
                           Content="{Binding YearlyExpensesSats}"
                           HorizontalAlignment="Center" />
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>